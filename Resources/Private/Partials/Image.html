{namespace v=Tx_Vhs_ViewHelpers}

<f:if condition="{settings.directInclusion}">
	<f:then>
		<f:if condition="{settings.lightbox}">
			<f:then>
				<a class="image-lightbox" href="{image.url}" relative="1" title="{image.title}">
					<img src="{image.url}" alt="{image.name}" class="{settings.image.className}" />
				</a>
			</f:then>
			<f:else>
				<img src="{image.url}" alt="{image.name}" class="{settings.image.className}" />
			</f:else>
		</f:if>
	</f:then>
	<f:else>
		<f:if condition="{settings.lightbox}">
			<f:then>
				<a class="image-lightbox" href="{image.url}" relative="1" title="{image.title}">
					<f:image src="{image.url}" treatIdAsReference="TRUE" alt="{image.name}"
					width="{record.imagewidth -> v:or(alternative: '-1')}{f:if(condition: record.imagewidth, then: settings.scaleMode)}"
					height="{record.imageheight -> v:or(alternative: '-1')}{f:if(condition: record.imageheight, then: settings.scaleMode)}" />
				</a>
			</f:then>
			<f:else>
				<f:image src="{image.url}" treatIdAsReference="TRUE" alt="{image.name}"
				width="{record.imagewidth -> v:or(alternative: '-1')}{f:if(condition: record.imagewidth, then: settings.scaleMode)}"
				height="{record.imageheight -> v:or(alternative: '-1')}{f:if(condition: record.imageheight, then: settings.scaleMode)}" />
			</f:else>
		</f:if>
	</f:else>
</f:if>